#!/bin/bash

# Packages must be already installed via `poetry install`
poetry show -o -t --no-dev | grep -v -e "--" | cut -d " " -f 1 | sed 's/$/\@latest/g' > no_dev.txt
poetry show -o -t | grep -v -e "--" | cut -d " " -f 1 | sed 's/$/\@latest/g' > all.txt
join -v1 -v2 all.txt no_dev.txt > dev.txt

echo "Updating app dependencies ..."
cat no_dev.txt | xargs poetry add
echo

echo "Updating dev dependencies ..."
cat dev.txt | xargs poetry add --dev
echo

echo "Cleaning up temp files ..."
rm all.txt no_dev.txt dev.txt
echo
